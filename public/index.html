<html>

<head>
    <link rel="stylesheet" href="./dist/assets/diagram-js.css">
    <link rel="stylesheet" href="./dist/assets/bpmn-font/css/bpmn.css">

    <link rel="stylesheet" href="./groups.css" />
    <link rel="stylesheet" href="./tabs.css" />
    <link rel="stylesheet" href="./properties.css" />
    <link rel="stylesheet" href="./listeners.css" />
    <link rel="stylesheet" href="./header.css" />
    <link rel="stylesheet" href="./fileUploader/css/style.css">
    <style>
        @font-face {
            font-family: IRANSans;
            font-style: normal;
            font-weight: 900;
            src: url('../fonts/eot/IRANSansWeb_Black.eot');
            src: url('../fonts/eot/IRANSansWeb_Black.eot?#iefix') format('embedded-opentype'),  /* IE6-8 */
            url('../fonts/woff2/IRANSansWeb_Black.woff2') format('woff2'),  /* FF39+,Chrome36+, Opera24+*/
            url('../fonts/woff/IRANSansWeb_Black.woff') format('woff'),  /* FF3.6+, IE9, Chrome6+, Saf5.1+*/
            url('../fonts/ttf/IRANSansWeb_Black.ttf') format('truetype');
        }
        @font-face {
            font-family: IRANSans;
            font-style: normal;
            font-weight: bold;
            src: url('../fonts/eot/IRANSansWeb_Bold.eot');
            src: url('../fonts/eot/IRANSansWeb_Bold.eot?#iefix') format('embedded-opentype'),  /* IE6-8 */
            url('../fonts/woff2/IRANSansWeb_Bold.woff2') format('woff2'),  /* FF39+,Chrome36+, Opera24+*/
            url('../fonts/woff/IRANSansWeb_Bold.woff') format('woff'),  /* FF3.6+, IE9, Chrome6+, Saf5.1+*/
            url('../fonts/ttf/IRANSansWeb_Bold.ttf') format('truetype');
        }
        @font-face {
            font-family: IRANSans;
            font-style: normal;
            font-weight: 500;
            src: url('../fonts/eot/IRANSansWeb_Medium.eot');
            src: url('../fonts/eot/IRANSansWeb_Medium.eot?#iefix') format('embedded-opentype'),  /* IE6-8 */
            url('../fonts/woff2/IRANSansWeb_Medium.woff2') format('woff2'),  /* FF39+,Chrome36+, Opera24+*/
            url('../fonts/woff/IRANSansWeb_Medium.woff') format('woff'),  /* FF3.6+, IE9, Chrome6+, Saf5.1+*/
            url('../fonts/ttf/IRANSansWeb_Medium.ttf') format('truetype');
        }
        @font-face {
            font-family: IRANSans;
            font-style: normal;
            font-weight: 300;
            src: url('../fonts/eot/IRANSansWeb_Light.eot');
            src: url('../fonts/eot/IRANSansWeb_Light.eot?#iefix') format('embedded-opentype'),  /* IE6-8 */
            url('../fonts/woff2/IRANSansWeb_Light.woff2') format('woff2'),  /* FF39+,Chrome36+, Opera24+*/
            url('../fonts/woff/IRANSansWeb_Light.woff') format('woff'),  /* FF3.6+, IE9, Chrome6+, Saf5.1+*/
            url('../fonts/ttf/IRANSansWeb_Light.ttf') format('truetype');
        }
        @font-face {
            font-family: IRANSans;
            font-style: normal;
            font-weight: 200;
            src: url('../fonts/eot/IRANSansWeb_UltraLight.eot');
            src: url('../fonts/eot/IRANSansWeb_UltraLight.eot?#iefix') format('embedded-opentype'),  /* IE6-8 */
            url('../fonts/woff2/IRANSansWeb_UltraLight.woff2') format('woff2'),  /* FF39+,Chrome36+, Opera24+*/
            url('../fonts/woff/IRANSansWeb_UltraLight.woff') format('woff'),  /* FF3.6+, IE9, Chrome6+, Saf5.1+*/
            url('../fonts/ttf/IRANSansWeb_UltraLight.ttf') format('truetype');
        }
        @font-face {
            font-family: IRANSans;
            font-style: normal;
            font-weight: normal;
            src: url('../fonts/eot/IRANSansWeb.eot');
            src: url('../fonts/eot/IRANSansWeb.eot?#iefix') format('embedded-opentype'),  /* IE6-8 */
            url('../fonts/woff2/IRANSansWeb.woff2') format('woff2'),  /* FF39+,Chrome36+, Opera24+*/
            url('../fonts/woff/IRANSansWeb.woff') format('woff'),  /* FF3.6+, IE9, Chrome6+, Saf5.1+*/
            url('../fonts/ttf/IRANSansWeb.ttf') format('truetype');
        }

    </style>

    <meta charset="utf-8" />
    <link rel="stylesheet" href="bootstarp.css">
    <script src="./jquery.js"></script>
    <script src="./bootstrap.js"></script>
    <link href="./select2.css" rel="stylesheet" />
    <script src="./select2.js"></script>

    <link rel="stylesheet" href="./treeview.css">

    <style>

        .bpp-properties-entry {
            direction: rtl;
        }

        .djs-direct-editing-parent {
            display: none;
        }

        .hidden {
            display: none;
        }

        .djs-palette {
            max-width: 50px;
            overflow: auto;
        }

        svg {
            margin-left: 100px;
        }

        .popup {
            z-index: 1000001;
            position: absolute;
            top: 8%;
            height: 80%;
            overflow: auto;
            width: 40%;
            left: 30%;
            /*box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);*/
            color: white;
            display: none;
        }

        .bodyOfPopUp {
            background-color: #e2e2e2;
            border: 2px solid black;
        }

        .headerOfPopup {
            border: 2px solid;
            border-bottom-width: 0;
            color: black;
            padding: 5px;
            direction: rtl;
            float: right;
            width: fit-content;
            background-color: #e2e2e2;
        }

        .select2-container {
            width: 100% !important;
        }

        .select2-results {
            z-index: 10000001 !important;
        }

        .select2-dropdown, .select2-dropdown--below {
            z-index: 10000001 !important;
        }

        .dark {
            background-color: #e8e7e79c;
            z-index: 10001;
            height: 200vh;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
        }

        .select2-results__option {
            text-align: right;
            direction: rtl;
        }

        input, select {
            padding: 3px;
            border: 2px solid #989494;
        }

        td {
            border: 2px solid;
            padding: 7px;
        }
        tr {
            margin: 10px;
            text-align: center;
        }
        tr:nth-child(odd) {
            background: white;
        }

    </style>

</head>

<body style="font-family: IRANSans !important;">

    <div class="dark hidden"></div>

    <div>

        <div style="width: 70%; float: left">
            <div id="canvas"></div>
        </div>

        <div style="width: 30%; float: left">
            <div id="js-properties-panel"></div>
        </div>
    </div>

    <div>
        <button style="margin-top: 20px" class="btn btn-primary" id="saveBtn">ذخیره</button>
        <button class="btn btn-primary hidden" id="saveBtnFake">ذخیره</button>
        <button style="margin-top: 20px" class="btn btn-primary" id="printBtn">چاپ</button>
        <button style="margin-top: 20px" class="btn btn-primary" id="outputBtn">خروجی</button>
    </div>

    <div class="popup" id="taskPopup">
        <div class="djs-palette open" style="width: 300px; max-width: 300px; touch-action: none; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
            <div class="djs-palette-entries">
                <div class="group" data-group="tools">
                    <div id="lozi" data-clicked="0" style="float: none; height: 80px" class="entry bpmn-icon-gateway-none" draggable="true" data-text="lozi" data-action="create.task" title="Create Task">
                        لوزی
                    </div>

                    <div id="rectangle" data-clicked="0" style="float: none; height: 80px" class="entry bpmn-icon-gateway-none" draggable="true" data-text="mostatil" data-action="create.task" title="Create Task">
            مستطیل
                    </div>

                    <div id="ring" data-clicked="0" style="float: none; height: 80px" class="entry bpmn-icon-gateway-none" draggable="true" data-text="dayere" data-action="create.task" title="Create Task">
            دایره
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="popup" id="editLabelPopup" style="top: 50% !important; width: 25% !important;; height: auto !important; direction: rtl">

        <center class="col-xs-12 bodyOfPopUp">

            <input type="text" style="color: black; display: block; margin: 10px" id="newLabel">

            <button style="margin: 10px" class="btn btn-success" onclick="submitNewLabel()">تایید</button>
            <button style="margin: 10px" class="btn btn-danger" onclick="closeEditPane()">بستن</button>

        </center>
    </div>

    <div class="popup" id="selectPopup">

        <div class="headerOfPopup"></div>

        <div class="col-xs-12 bodyOfPopUp">

            <div id="type1" class="col-xs-12" style="padding: 0;">

                <div class="col-xs-12" style="margin: auto; text-align: center; direction: rtl; padding: 0">

                    <div style="direction: rtl; color: black; margin-top: 10px; padding: 0" class="col-xs-12">

                        <div class="col-xs-12" id="role_div" style="padding: 0">
                            <div class="col-xs-8" style="padding: 0">
                                <input style="width: 100%" id="search" type="search" placeholder="عبارت مورد نظر خود را جست و جو کنید">
                                <ul style="text-align: right" class="treeview"></ul>
                            </div>
                            <div class="col-xs-4" style="padding: 0">
                                <label for="search"><span id="condition_text"></span><span>&nbsp;</span><span>مورد نظر</span></label>
                            </div>
                        </div>

                        <div class="col-xs-12" style="padding: 0">
                            <label for="newRole"><span id="not_found_condition_text"></span><span>&nbsp;</span><span> مورد نظر خود را پیدا نکردم</span></label>
                            <input id="newRole" onchange="changeNewRoleStatus()" type="checkbox">
                        </div>

                        <div class="col-xs-12" style="margin-top: 5px; padding: 0">
                            <div class="col-xs-8" style="padding: 0">
                                <input style="width: 100%" placeholder="پست مورد نظر خود را وارد نمایید" class="hidden" type="text" id="newRoleText">
                            </div>
                            <div class="col-xs-4" style="padding: 0"></div>
                        </div>
                    </div>

                </div>

                <div class="col-xs-12" style="margin: 20px auto; text-align: center; direction: rtl; padding: 10px; border: 2px dotted black">

                    <div id="condition_div" class="col-xs-12" style="padding: 0">
                        <div class="col-xs-8" style="padding: 0">
                            <select style="text-align: right; direction: rtl" class="js-example-basic-single" id="select"></select>
                        </div>
                        <div class="col-xs-4" style="padding: 0 15px; text-align: left; color: black">شرط مورد نظر</div>
                    </div>

                    <div class="col-xs-12" id="newConditionDiv" style="margin-top: 10px; padding: 0">
                        <div class="col-xs-8" style="padding: 0">
                            <input type="text" id="newConditionText" style="width: 70%; float: right; color: black">
                            <span class="glyphicon glyphicon-plus" style="color: green; cursor: pointer" onclick="selectNewCondition($('#newConditionText').val(), $('#newConditionText').val())"></span>
                            <span style="color: black">افزودن شرط</span>
                        </div>

                        <div class="col-xs-4" style="color: black; padding: 0 15px; text-align: left">
                            <label for="newConditionText">شرط جدید</label>
                        </div>
                    </div>

                    <div class="col-xs-12" style="padding: 0">
                        <div class="col-xs-8" style="padding: 10px 0; color: black; text-align: right">
                            <label for="newCondition"><span>شرط مورد نظر خود را پیدا نکردم</span></label>
                            <input id="newCondition" onchange="changeNewConditionStatus()" type="checkbox">

                            <div class="col-xs-12" style="margin-top: 10px; padding: 0" id="conditionResults"></div>
                        </div>
                        <div class="col-xs-4" style="padding: 0"></div>
                    </div>

                </div>

                <div class="col-xs-12" style="margin: auto; text-align: center; direction: rtl; padding: 0">
                    <button style="float: left; margin-top: 40px" onclick="submit()" class="btn btn-default">اعمال تغییرات</button>
                </div>

                <div class="col-xs-12" style="margin-top: 10px; padding: 0">
                    <div class="col-xs-9" style="height: 10px; border-bottom: 2px dashed black; padding: 0"></div>
                    <div class="col-xs-3" style="color: black; padding: 0; text-align: right">اطلاعات وارد شده</div>
                </div>

                <table class="col-xs-12" style="margin: 20px auto; text-align: center; direction: rtl; padding: 20px;">
                <tr>
                    <td><center>ردیف</center></td>
                    <td><center id="table_condition_text"></center></td>
                    <td><center>شرط</center></td>
                    <td><center>عملیات</center></td>
                </tr>
                <tbody id="rows"></tbody>
            </table>
            </div>

            <div class="col-xs-12" id="type2" style="padding: 15px; direction: rtl; text-align: right;">

                <div class="col-xs-8" style="padding: 0">
                    <select style="text-align: right; direction: rtl" class="js-example-basic-single" id="selectInType2"></select>
                    <div class="col-xs-12" style="margin-top: 10px; padding: 0" id="conditionResultsInType2"></div>
                </div>

                <div class="col-xs-4" style="padding: 0 15px; text-align: left; color: black">آیتم مورد نظر</div>

            </div>

            <div style="float: left; margin: 40px auto; width: fit-content;">
                <button id="done" class="btn btn-default" onclick="done()">ثبت</button>
                <!--<button class="btn btn-default">افزودن فایل</button>-->
                <button class="btn btn-default" onclick="$('#selectPopup').css('display', 'none'); $('.dark').addClass('hidden')">لغو</button>
            </div>
        </div>
    </div>

    <canvas width="800" height="1000" class="hidden" id="myCanvasPrint"></canvas>

    <!--class="hidden"-->
    <form method="post" enctype="multipart/form-data" action="https://ppl.ut.ac.ir/demo/editor/basedata/upload.php" id="upload" class="popup" style="top: 0 !important; height: auto !important;">
        <div id="drop" style="font-family: IRANSans !important;">
            فایل را اینجا رها کن

            <a>جست و جو فایل</a>
            <input type="file" id="upl" name="upl" multiple />
            <input type="hidden" id="diagram_id" name="diagram">
            <input type="hidden" id="elem_id" name="elem">
        </div>

        <ul style="max-height: 200px; overflow: auto"></ul>

        <center>
            <span style="font-family: IRANSans" class="btn btn-success" onclick="$('#upload').css('display', 'none'); $('.dark').addClass('hidden');">تایید</span>
        </center>
    </form>

    <script src="./tagHandler.js"></script>
    <script src="./treeview.js"></script>
    <script src="./treeViewExtension.js"></script>
    <script src="./app.bundled.js"></script>
    <script src="./props.js"></script>
    <script src="./editLabel.js"></script>
    <script src="./fileUploader/js/jquery.knob.js"></script>
    <script src="./fileUploader/js/jquery.ui.widget.js"></script>
    <script src="./fileUploader/js/jquery.iframe-transport.js"></script>
    <script src="./fileUploader/js/jquery.fileupload.js"></script>
    <script src="./fileUploader/js/script.js"></script>


    <script>

        function removeFile(file_id, diagram) {

            $("#file_" + file_id).remove();

            $.ajax({
                type: 'post',
                url: 'https://ppl.ut.ac.ir/demo/editor/basedata/removeFile.php',
                data: {
                    'file_id': file_id,
                    'diagram': diagram
                },
                success: function (response) {
                    $("#Attach").val(response).change().focusout();
                    $("#saveBtnFake").click();
                }
            });
        }

    </script>

</body>

</html>
